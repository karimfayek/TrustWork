import{a as w,r as c,j as s}from"./app-DvS3YIbi.js";import{A as S}from"./AuthenticatedLayout-CcFu6J-C.js";import b from"./AttForm-BMrMS6D4.js";import{D}from"./DeleteButton-CwWoyPYj.js";import"./ApplicationLogo-CZUMM-g6.js";import"./ResponsiveNavLink-BacrPWaj.js";import"./transition-DrKw7BpY.js";import"./HandelDelete-CgJ9Wsol.js";function O({atts:o,users:x,projects:u,showManual:j=!0,customers:g}){const d=w().props.auth.user,y=d==null?void 0:d.role,[l,p]=c.useState({from:new Date().toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[r,f]=c.useState(""),[m,N]=c.useState(o);console.log(m);const v=()=>{const e=l.from,t=l.to,i=o.filter(n=>{const a=r?n.user_id==r:!0,h=new Date(n.check_in_time).toISOString().split("T")[0],_=h>=e&&h<=t;return a&&_});N(i)};return c.useEffect(()=>{v()},[l,r,o]),s.jsxs(S,{children:[s.jsx(b,{projects:u,users:x,showManual:j,customers:g}),y!=="proj"&&s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 mt-6",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[" ","..   الحضور والانصراف لكل الموظفين"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{children:"من:"}),s.jsx("input",{type:"date",value:l.from,onChange:e=>p(t=>({...t,from:e.target.value}))}),s.jsx("label",{children:"إلى:"}),s.jsx("input",{type:"date",value:l.to,onChange:e=>p(t=>({...t,to:e.target.value}))})]}),s.jsxs("select",{name:"user",id:"user",value:r,onChange:e=>f(e.target.value),children:[s.jsx("option",{value:"",children:"اختر الموظف"}),x.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-gray-100 text-gray-700",children:s.jsxs("tr",{className:"text-right",children:[s.jsx("th",{className:"px-6 py-3 ",children:" الموظف"}),s.jsx("th",{className:"px-6 py-3 ",children:" التاريخ"}),s.jsx("th",{className:"px-6 py-3 ",children:"المكان"}),s.jsx("th",{className:"px-6 py-3 ",children:" الوقت"}),s.jsx("th",{className:"px-6 py-3 ",children:"الانصراف"}),s.jsx("th",{className:"px-6 py-3 ",children:"- "})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:m&&m.map(e=>{var t,i,n,a;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:(t=e.user)==null?void 0:t.name}),s.jsx("td",{className:"px-6 py-4",children:new Date(e.check_in_time).toLocaleDateString("ar-EG")}),s.jsxs("td",{className:"px-6 py-4",children:[e.project&&((i=e.project)==null?void 0:i.name),e.visit&&((a=(n=e.visit)==null?void 0:n.customer)==null?void 0:a.name),e.type==="internal"&&"داخل الشركة",e.type==="external"&&e.customer]}),s.jsxs("td",{className:"px-6 py-4",children:[e.in_location!==null&&new Date(e.check_in_time).toLocaleTimeString("en-US"),e.in_location!=="غير محدد"&&e.in_location!==null&&s.jsx("a",{href:"https://www.google.com/maps?q="+(e==null?void 0:e.in_location),target:"_blank",className:"text-blue-600 underline",children:" - لوكيشن"})]}),s.jsxs("td",{className:"px-6 py-4",children:[e.out_location!==null&&new Date(e.check_out_time).toLocaleTimeString("en-US"),e.out_location!=="غير محدد"&&e.out_location!==null&&s.jsx("a",{href:"https://www.google.com/maps?q="+(e==null?void 0:e.out_location),target:"_blank",className:"text-blue-600 underline",children:" - لوكيشن"})]}),s.jsx("td",{className:"px-6 py-4 space-x-2 rtl:space-x-reverse",children:s.jsx(D,{id:e.id,routeName:"admin.att.delete"})})]},e.id)})})]})})]})]})}export{O as default};
