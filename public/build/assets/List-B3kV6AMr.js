import{r as o,j as e,R as g,L as f,a as j,H as b}from"./app-CjDrbc5v.js";import{A as v}from"./AuthenticatedLayout-2doSJO6P.js";import{h as N}from"./HandelDelete-Bom7cxm9.js";import"./ApplicationLogo-B96U6i8t.js";import"./ResponsiveNavLink-CgzO8AvL.js";import"./transition-BRf4-qeB.js";const y=({options:r})=>{const[x,m]=o.useState(!1),i=o.useRef(null);o.useEffect(()=>{const t=s=>{i.current&&!i.current.contains(s.target)&&m(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const n=()=>{m(!x)};return e.jsxs("div",{className:"relative inline-block text-right",ref:i,children:[e.jsx("button",{onClick:n,className:"flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-200 focus:outline-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),x&&e.jsx("div",{className:"z-10 origin-top-right absolute left-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:e.jsx("div",{className:"py-1",role:"menu",children:r.map(t=>e.jsxs(g.Fragment,{children:[t.type==="link"&&e.jsx(f,{href:t.href,className:"block w-full text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:t.label},t.label),t.type==="button"&&e.jsx("button",{onClick:t.onClick,className:"block w-full text-right px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",children:t.label},t.label)]}))})})]})};function L({users:r}){const[x,m]=o.useState("active"),[i,n]=o.useState([...r].filter(a=>a.status===1)),t=a=>{a==="active"?n([...r].filter(l=>l.status===1)):a==="inactive"?n([...r].filter(l=>l.status===0)):a==="temporary"?n([...r].filter(l=>l.temporary===1)):a==="all"&&n([...r]),m(a)};console.log(i,"users");const s=j().props.auth.user;return e.jsxs(v,{children:[e.jsx(b,{title:"Admin Dashboard"}),e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"  الموظفين"}),e.jsxs("select",{className:"border w-100 border-gray-300",onChange:a=>t(a.target.value),value:x,children:[e.jsx("option",{value:"all",children:"الكل"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"inactive",children:"غير نشط"}),e.jsx("option",{value:"temporary",children:"موظف مؤقت"})]}),e.jsx(f,{href:route("admin.user.create"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-md shadow",children:"+ إنشاء موظف جديد"})]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{className:"text-right",children:[e.jsx("th",{className:"px-6 py-3 ",children:"اسم الموظف"}),e.jsx("th",{className:"px-6 py-3 ",children:" رقم التليفون"}),["admin"].some(a=>{var l;return(l=s==null?void 0:s.rolesnames)==null?void 0:l.includes(a)})&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-6 py-3 ",children:"المرتب الاساسي"}),e.jsx("th",{className:"px-6 py-3 ",children:"المرتب المتغير"}),e.jsx("th",{className:"px-6 py-3 ",children:"المرتب النهائي"})]}),e.jsx("th",{className:"px-6 py-3 ",children:"الخيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(a=>{var l,h,p,u;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:a.name}),e.jsx("td",{className:"px-6 py-4",children:a.phone}),["admin"].some(c=>{var d;return(d=s==null?void 0:s.rolesnames)==null?void 0:d.includes(c)})&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 text-gray-600",children:(l=a.salary)==null?void 0:l.base_salary}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:((h=a.salary)==null?void 0:h.final_salary)-((p=a.salary)==null?void 0:p.base_salary)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:(u=a.salary)==null?void 0:u.final_salary})]}),e.jsx("td",{className:"px-6 py-4 space-x-2 rtl:space-x-reverse",children:["admin"].some(c=>{var d;return(d=s==null?void 0:s.rolesnames)==null?void 0:d.includes(c)})?e.jsx(y,{options:[{label:" عرض",type:"link",href:route("admin.user.edit",a.id)},{label:"طباعة راتب",type:"link",href:route("admin.user.salary",a.id)},{label:" مسح",onClick:c=>N(c,a.id,"admin.user.delete"),type:"button"}]}):e.jsx(y,{options:[{label:" عرض",type:"link",href:route("admin.user.edit",a.id)}]})})]},a.id)})})]})})]})]})}export{L as default};
