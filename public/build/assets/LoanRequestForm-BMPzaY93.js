import{u as N,a as g,r as a,j as e}from"./app-010wRZBS.js";function w({maxAmount:r,routeName:d="/loans/request",title:u="طلب سلفه"}){const{data:o,setData:n,post:c,processing:i,reset:x,errors:t,setError:b}=N({amount:"",reason:""}),{props:p}=g(),l=p.errors.message,[m,f]=a.useState(!0),[h,j]=a.useState(!1);a.useEffect(()=>{new Date().getDate()<15&&f(!1)},[]);const v=s=>{if(s.preventDefault(),!m){b("amount","لا يمكنك طلب السلفة إلا بعد يوم 15 من الشهر.");return}c(d,{preserveScroll:!0,onSuccess:()=>{j(!0),x()}})};return e.jsxs("form",{onSubmit:v,className:" bg-white p-4  shadow",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[" ",u]}),!m&&e.jsx("div",{className:"text-red-600 font-medium mb-4",children:"لا يمكنك طلب السلفة قبل يوم 15 من الشهر."}),l&&e.jsx("div",{className:"text-red-600 font-medium mb-4",children:l}),h&&e.jsx("div",{className:"text-green-600 font-medium mb-4",children:"تم طلب السلفه"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block font-medium",children:["المبلغ المطلوب (حد أقصى: ",r," ج.م)"]}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-3 py-2",value:o.amount,onChange:s=>n("amount",s.target.value),max:r}),t.amount&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:t.amount})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium",children:"السبب"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",value:o.reason,onChange:s=>n("reason",s.target.value)}),t.reason&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:t.reason})]}),e.jsx("button",{type:"submit",disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إرسال الطلب"})]})}export{w as default};
