import{a as p,i as P,r as i,b as h,j as e,H as C,L as u}from"./app-BhCpNvAf.js";import{A as _}from"./AuthenticatedLayout-BhII1emX.js";import{P as D}from"./Pagination-BnjG62pp.js";import A from"./CategorySidebar-DbjHB5Ak.js";import"./ApplicationLogo-DwFTMPFn.js";import"./ResponsiveNavLink-CnCumTC7.js";import"./transition-BtiOQ2QI.js";function T({products:c,categories:j,productsStockCostValue:y,productsStockPriceValue:g}){const a=p().props.auth.user,{filters:x}=p().props,[d,N]=P([],"selected-products"),[o,b]=i.useState(x.search||""),[m,f]=i.useState(x.stock??""),[n,v]=i.useState(x.category??""),w=n!==""?1:c.current_page,k=s=>{N(t=>t.includes(s)?t.filter(l=>l!==s):[...t,s])};i.useEffect(()=>{const s=setTimeout(()=>{h.get(route("products.index"),{search:o,stock:m,category:n,page:w||1},{preserveState:!0,replace:!0})},900);return()=>clearTimeout(s)},[o,m,n]);const S=(s,t)=>{s.preventDefault(),window.confirm("هل أنت متأكد ؟")&&h.delete(route("products.destroy",{id:t}))};return e.jsxs(_,{children:[e.jsx(C,{title:"Admin Dashboard"}),e.jsxs("div",{className:" mx-auto p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"المنتجات"}),e.jsxs("small",{className:"text-gray-600",children:[c.total," عدد المنتجات"]}),["admin"].some(s=>{var t;return(t=a==null?void 0:a.rolesnames)==null?void 0:t.includes(s)})&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"text-gray-600",children:[y," قيمه المخزون (تكلفه)"]}),e.jsxs("small",{className:"text-gray-600",children:[g," قيمه المخزون (سعر البيع)"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-4 w-full md:w-auto",children:[e.jsx("input",{type:"text",value:o,onChange:s=>b(s.target.value),placeholder:"بحث ..",className:"px-4 py-2 border rounded w-full md:w-64"}),e.jsxs("select",{value:m,onChange:s=>f(s.target.value),className:"px-4 py-2 border rounded w-full md:w-40",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"In Stock"}),e.jsx("option",{value:"0",children:"Out of Stock"})]}),e.jsx(u,{href:route("products.create"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-md shadow text-center",children:"+ إنشاء منتج جديد"})]})]}),d.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:()=>h.post(route("quotes.create"),{products:d}),className:"bg-indigo-600 text-white px-5 py-2 rounded shadow",children:["إنشاء عرض سعر (",d.length,")"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx(A,{categories:j,selectedCategory:n,onSelect:v})}),e.jsx("div",{className:"md:col-span-3 bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{className:"text-right",children:[e.jsx("th",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",disabled:!0})}),e.jsx("th",{className:"px-6 py-3",children:"التصنيف"}),e.jsx("th",{className:"px-6 py-3",children:"Part Number"}),e.jsx("th",{className:"px-6 py-3",children:"الوصف"}),e.jsx("th",{className:"px-6 py-3",children:"سعر البيع"}),["admin"].some(s=>{var t;return(t=a==null?void 0:a.rolesnames)==null?void 0:t.includes(s)})&&e.jsx("th",{className:"px-6 py-3",children:"سعر التكلفة"}),e.jsx("th",{className:"px-6 py-3",children:"Data Sheet"}),e.jsx("th",{className:"px-6 py-3",children:"المخزن"}),e.jsx("th",{className:"px-6 py-3",children:"الكمية"}),e.jsx("th",{className:"px-6 py-3",children:"الخيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.data.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"checkbox",checked:d.includes(s.id),onChange:()=>k(s.id)})}),e.jsx("td",{className:"px-6 py-4",children:(t=s.category)==null?void 0:t.name}),e.jsx("td",{className:"px-6 py-4",children:s.part_number}),e.jsx("td",{className:"px-6 py-4",children:s.description}),e.jsx("td",{className:"px-6 py-4",children:s.price}),["admin"].some(l=>{var r;return(r=a==null?void 0:a.rolesnames)==null?void 0:r.includes(l)})&&e.jsx("td",{className:"px-6 py-4",children:s.cost_price}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("a",{href:s.data_sheet,target:"_blank",className:"text-blue-600 hover:underline",children:s.part_number})}),e.jsx("td",{className:"px-6 py-4",children:s.stock?e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"نعم"}):e.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"لا"})}),e.jsx("td",{className:"px-6 py-4",children:s.quantity}),e.jsx("td",{className:"px-6 py-4 space-x-2 rtl:space-x-reverse",children:["admin"].some(l=>{var r;return(r=a==null?void 0:a.rolesnames)==null?void 0:r.includes(l)})&&e.jsxs(e.Fragment,{children:[e.jsx(u,{href:route("products.edit",s.id),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-xs",children:"تعديل"}),e.jsx("button",{onClick:l=>S(l,s.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-xs",children:"مسح"})]})})]},s.id)})})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(D,{links:c.links})})]})]})}export{T as default};
