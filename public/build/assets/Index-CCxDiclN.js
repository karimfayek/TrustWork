import{r as p,u as j,j as e,H as N,R as g,b as v}from"./app-DUf_aYV0.js";import{A as f}from"./AuthenticatedLayout-BcyJeHgR.js";import{D as y}from"./DeleteButton-C9-hvhOc.js";import"./ApplicationLogo-Bz3u8UGw.js";import"./ResponsiveNavLink-Bx8GrJmK.js";import"./transition-CXm7SPW5.js";import"./HandelDelete-TbeF2EoB.js";function q({loans:o,users:i}){const[l,c]=p.useState(!1),{data:d,setData:n,post:m,reset:x,errors:a}=j({user_id:"",loan_date:"",status:"",reason:"",points:1,amount:""}),h=(s,r)=>{v.post(route("admin.loans.spent",{id:r}))};return e.jsxs(f,{children:[e.jsx(N,{title:"نظام السلف"}),e.jsxs("div",{className:"max-w-5xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md ",children:[e.jsxs("div",{className:"bg-white flex items-center justify-between mb-4 p-2 sticky top-0",children:[e.jsx("h1",{className:"text-2xl font-bold  text-center",children:"سلف  الموظفين"}),e.jsx("button",{onClick:()=>c(!l),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:l?"إغلاق النموذج":"إضافة سلفة"})]}),e.jsx("hr",{className:"mb-12"}),!l&&e.jsx(g.Fragment,{children:o.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"لا توجد سلف حتى الآن."}):o.map((s,r)=>e.jsxs("div",{className:"mb-8 border-b pb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-indigo-600",children:s.user}),e.jsxs("table",{className:"w-full mt-3 text-sm border border-gray-300 rounded",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"التاريخ"}),e.jsx("th",{className:"p-2 border",children:"السبب"}),e.jsx("th",{className:"p-2 border",children:"القيمة"}),e.jsx("th",{className:"p-2 border",children:"الحاله"}),e.jsx("th",{className:"p-2 border",children:"الموافقه"}),e.jsx("th",{className:"p-2 border",children:"-"})]})}),e.jsx("tbody",{children:s.records.map((t,u)=>e.jsxs("tr",{className:"text-center hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border",children:t.date}),e.jsx("td",{className:"p-2 border",children:t.reason}),e.jsx("td",{className:"p-2 border",children:t.amount}),e.jsx("td",{className:"p-2 border",children:t.status}),e.jsx("td",{className:"p-2 border",children:t.admin_status}),e.jsxs("td",{className:"p-2 border",children:[t.status!=="paid"&&e.jsx("button",{onClick:b=>h(b,t.id),className:"inline-block bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"صرف"}),e.jsx(y,{id:t.id,routeName:"loan.delete"})]})]},u))})]})]},r))})]}),e.jsx("div",{className:"flex justify-end mb-4"}),l&&e.jsxs("form",{onSubmit:s=>{s.preventDefault(),m(route("admin.loan.store"),{onSuccess:()=>{x(),c(!1)}})},className:"mb-8 bg-gray-50 p-6 rounded-md shadow",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-700",children:"إضافة سلفة جديدة"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"الموظف"}),e.jsxs("select",{value:d.user_id,onChange:s=>n("user_id",s.target.value),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"اختر موظفًا"}),i.map((s,r)=>e.jsx("option",{value:s.id,children:s.name},r))]}),a.user_id&&e.jsx("p",{className:"text-red-500 text-sm",children:a.user_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"التاريخ"}),e.jsx("input",{type:"date",value:d.loan_date,onChange:s=>n("loan_date",s.target.value),className:"w-full border rounded px-3 py-2",required:!0}),a.loan_date&&e.jsx("p",{className:"text-red-500 text-sm",children:a.loan_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"القيمة"}),e.jsx("input",{type:"number",value:d.amount,onChange:s=>n("amount",s.target.value),className:"w-full border rounded px-3 py-2",required:!0}),a.amount&&e.jsx("p",{className:"text-red-500 text-sm",children:a.amount})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"السبب"}),e.jsx("textarea",{value:d.reason,onChange:s=>n("reason",s.target.value),className:"w-full border rounded px-3 py-2",rows:"3"}),a.reason&&e.jsx("p",{className:"text-red-500 text-sm",children:a.reason})]})]}),e.jsx("div",{className:"mt-4 text-end",children:e.jsx("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"حفظ السلفه"})})]})]})}export{q as default};
