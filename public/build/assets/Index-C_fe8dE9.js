import{a as h,u as p,r as l,j as e}from"./app-DM1yzmg1.js";import{A as j}from"./AuthenticatedLayout-DIia7_uF.js";import"./ApplicationLogo-ZbhgfKwJ.js";import"./ResponsiveNavLink-1h3eJXjO.js";import"./transition-DDZyfpeE.js";function S(){const{tools:d,users:n,assignments:o}=h().props,{data:s,setData:a,post:r}=p({tool_id:"",user_id:"",quantity:""}),[i,y]=l.useState(""),[x,g]=l.useState(""),[N,b]=l.useState(1),c=t=>{t.preventDefault(),console.log("form",i,x),r(route("tools.assign"),{tool_id:s.tool_id,user_id:s.user_id,quantity:s.quantity})},m=t=>{r(route("tools.returned",t))},u=t=>{r(route("tools.lost",t))};return e.jsx(j,{children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-700",children:"🛠️ إدارة عهدة الأدوات"}),e.jsxs("form",{onSubmit:c,className:"bg-white shadow rounded p-4 mb-8 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-600",children:"تسليم أداة"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{className:"border rounded p-2",value:s.tool_id,onChange:t=>a("tool_id",t.target.value),children:[e.jsx("option",{value:"",children:"اختر أداة"}),d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{className:"border rounded p-2",value:s.user_id,onChange:t=>a("user_id",t.target.value),children:[e.jsx("option",{value:"",children:"اختر موظف"}),n.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("input",{type:"number",min:"1",className:"border rounded p-2",value:s.quantity,onChange:t=>a("quantity",t.target.value),placeholder:"الكمية"})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"تسليم"})]}),e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-600",children:"قائمة الأدوات المسلمة"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white shadow rounded",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"الموظف"}),e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"الأداة"}),e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"الكمية"}),e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"الحالة"}),e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"الإجراءات"}),e.jsx("th",{className:"py-2 px-4 text-right text-sm font-medium text-gray-600",children:"تاريخ "})]})}),e.jsx("tbody",{children:o.map(t=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4",children:t.user.name}),e.jsx("td",{className:"py-2 px-4",children:t.tool.name}),e.jsx("td",{className:"py-2 px-4",children:t.quantity}),e.jsxs("td",{className:"py-2 px-4",children:[t.status==="assigned"&&e.jsx("span",{className:"text-yellow-600",children:"مسلم"}),t.status==="returned"&&e.jsx("span",{className:"text-green-600",children:"مرتجع"}),t.status==="lost"&&e.jsx("span",{className:"text-red-600",children:"مفقود"})]}),e.jsxs("td",{className:"py-2 px-4 space-x-2",children:[t.status==="assigned"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(t.id),className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600",children:"إرجاع"}),e.jsx("button",{onClick:()=>u(t.id),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"مفقود"})]}),(t.status==="returned"||t.status==="lost")&&e.jsx("span",{className:"text-gray-500",children:"لا توجد إجراءات"})]}),e.jsxs("td",{children:[t.status==="assigned"&&e.jsx("span",{children:t.assigned_at}),t.status==="returned"&&e.jsx("span",{children:t.returned_at}),t.status==="lost"&&e.jsx("span",{children:t.lost_at})]})]},t.id))})]})})]})})}export{S as default};
