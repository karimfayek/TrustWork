import{a as C,r as d,u as E,j as e,H as G}from"./app-BMMUUtt3.js";import{U as J}from"./UserLayout-DwL357vd.js";import K from"./LoanRequestForm-FvsS7B_0.js";import M from"./SalaryCalculator-CvkEyNe9.js";import{I as O}from"./InputLabel-DSJSc-3T.js";import Q from"./LeaveRequestForm-CaxMeJrp.js";import T from"./Loans-DxH_LVrW.js";import V from"./Leaves-HSZIZSDN.js";import"./ApplicationLogo-DACMkUDR.js";import"./ResponsiveNavLink-F9ICIPml.js";import"./transition-S_Iy5K2R.js";import"./DeleteButton-Q9gpM-Hg.js";import"./HandelDelete-BuXuKjoZ.js";function ie(){var N,w;const{advances:a,expenses:i,totalAdvance:A,totalExpense:v,remaining:_,activeProjects:o,finalSalary:g,leaves:k,loans:D}=C().props,l=C().props.auth.user;console.log(l,"user");const[c,q]=d.useState(!1),[m,L]=d.useState(!1),[x,F]=d.useState(!1),[h,R]=d.useState(!1),{data:p,setData:u,post:U,processing:H,reset:I,errors:f}=E({amount:"",note:""}),{data:j,setData:n,post:P,processing:z,reset:B,errors:r}=E({amount:"",description:"",advance_id:"",file:null});return e.jsxs(J,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Profile"}),children:[e.jsx(G,{title:"Profile"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" الحضور والمهام والادوات"}),e.jsx("button",{onClick:()=>R(!h),children:e.jsxs("p",{className:"border p-1 border-black",children:["  ",h?"اخفاء":"عرض"]})}),e.jsx("hr",{className:"mt-6"}),h&&e.jsx(M,{user:l,forUser:!0})]}),((N=l.rewards)==null?void 0:N.length)>0&&e.jsx("div",{className:"md:grid grid-cols-1 md:grid-cols-3 gap-6 px-4 py-10",children:e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"مكافئات"}),e.jsx("hr",{}),(w=l.rewards)==null?void 0:w.map(s=>e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"القيمة"}),e.jsxs("p",{children:[s.amount," - ",s.reason," "]}),e.jsxs("p",{children:["بتاريخ : ",s.reward_date]}),e.jsx("hr",{className:"my-2"})]}))]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"العهدة المالية"}),e.jsx("button",{onClick:()=>q(!c),children:e.jsxs("p",{className:"border p-1 border-black",children:["  ",c?"اخفاء":"عرض"]})}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"إجمالي العهدة:"})," ",A," ج"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"إجمالي المصروفات:"})," ",v," ج"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"المتبقي:"})," ",_," ج"]})]}),e.jsxs("div",{className:"sm:grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"العهد "}),e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:a==null?void 0:a.map((s,b)=>{var t;return e.jsxs("li",{className:"border-b py-2",children:[e.jsxs("div",{children:["📅 ",s.given_at||"بانتظار الموافقه"]}),e.jsxs("div",{children:["💵 ",s.amount," ج"]}),e.jsxs("div",{children:["📝 ",s.note]}),e.jsxs("div",{children:["📝 المشروع : ",(t=s.project)==null?void 0:t.name]}),e.jsxs("div",{children:["📝 ",s.status]})]},b)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"المصروفات"}),e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:i==null?void 0:i.map((s,b)=>{var t,y,S;return e.jsxs("li",{className:"border-b py-2",children:[e.jsxs("div",{children:["📅 ",s.spent_at]}),e.jsxs("div",{children:["💸 ",s.amount," ج"]}),e.jsxs("div",{children:["📝 ",s.description]}),e.jsxs("div",{children:["📝 المشروع : ",(y=(t=s.advance)==null?void 0:t.project)==null?void 0:y.name]}),e.jsxs("div",{children:["اضيفت بواسطة :  ",(S=s.by)==null?void 0:S.name]})]},b)})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"طلب عهدة "}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),U(route("employee.advance.store"),{onSuccess:()=>I()})},children:[e.jsx("input",{type:"number",placeholder:"المبلغ",value:p.amount,onChange:s=>u("amount",s.target.value),className:"w-full border p-2 mb-2",required:!0}),e.jsx("input",{type:"text",placeholder:"الغرض من العهدة",value:p.note,onChange:s=>u("note",s.target.value),className:"w-full border p-2 mb-2",required:!0}),f.amount&&e.jsx("div",{className:"text-red-600",children:f.amount}),e.jsxs("select",{value:p.project_id,onChange:s=>u("project_id",s.target.value),className:"w-full border p-2 mb-2",children:[o==null?void 0:o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id)),e.jsx("option",{value:"",children:"اخرى"})]}),e.jsx("button",{type:"submit",disabled:H,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"طلب العهدة"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"إضافة مصروف"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),P(route("employee.expense.store"),{onSuccess:()=>B()})},children:[e.jsx("input",{required:!0,type:"number",placeholder:"المبلغ",value:j.amount,onChange:s=>n("amount",s.target.value),className:"w-full border p-2 mb-2"}),r.amount&&e.jsx("div",{className:"text-red-600",children:r.amount}),e.jsx("input",{required:!0,type:"text",placeholder:"الوصف",value:j.description,onChange:s=>n("description",s.target.value),className:"w-full border p-2 mb-2"}),r.description&&e.jsx("div",{className:"text-red-600",children:r.description}),e.jsxs("select",{required:!0,value:j.advance_id,onChange:s=>n("advance_id",s.target.value),className:"w-full border p-2 mb-2",children:[e.jsx("option",{value:"",children:"من العهدة"}),a==null?void 0:a.map(s=>e.jsxs("option",{value:s.id,children:[s.project?s.project.name:"اخرى"," - ",s.amount," جم"]},s.id))]}),r.advance_id&&e.jsx("div",{className:"text-red-600",children:r.advance_id}),e.jsx(O,{children:"ارفق الايصال"}),e.jsx("input",{type:"file",onChange:s=>n("file",s.target.files[0]),className:"bg-[#FF2D20]/10 border border-black mb-2 w-full",required:!0}),r.file&&e.jsx("div",{className:"text-red-600",children:r.file}),e.jsx("button",{type:"submit",disabled:z,className:"bg-green-500 text-white px-4 py-2 rounded",children:"حفظ المصروف"})]})]})]})]}),e.jsx("hr",{className:"py-6 my-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" السلف"}),e.jsx("button",{onClick:()=>L(!m),children:e.jsxs("p",{className:"border p-1 border-black",children:["  ",m?"اخفاء":"عرض"]})}),m&&e.jsx(T,{totalExpense:v,loans:D,children:e.jsx(K,{maxAmount:g*.25})}),e.jsx("hr",{className:"py-6 my-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:" الاجازات"}),e.jsx("button",{onClick:()=>F(!x),children:e.jsxs("p",{className:"border p-1 border-black",children:["  ",x?"اخفاء":"عرض"]})}),x&&e.jsx(V,{leaves:k,children:e.jsx(Q,{maxAmount:g*.25})})]})]})}export{ie as default};
