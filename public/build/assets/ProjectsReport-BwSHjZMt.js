import{r as l,j as e}from"./app-010wRZBS.js";import p from"./ReportLayout-CrJz74pE.js";import"./AuthenticatedLayout-wz4UIe47.js";import"./ApplicationLogo-CLCJLUPQ.js";import"./ResponsiveNavLink-dcmeS5bU.js";import"./transition-BmRszfgL.js";function _({projects:n}){const[s,b]=l.useState("all");return e.jsx(p,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"mb-4 print:hidden",children:[e.jsx("label",{htmlFor:"projectFilter",className:"mr-2 font-semibold",children:"فلترة حسب المشروع:"}),e.jsxs("select",{id:"projectFilter",value:s,onChange:t=>b(t.target.value),className:"border px-2 py-1 rounded",children:[e.jsx("option",{value:"all",children:"الكل"}),n.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),n.filter(t=>s==="all"||t.id==s).map((t,g)=>{var i,c,o,x;return e.jsx(l.Fragment,{children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-800 border-b pb-2 mb-2",children:["🏗️ ",t.name]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mb-4",children:[e.jsxs("p",{children:["📅 ",e.jsx("strong",{children:"تاريخ البدء:"})," ",t.start_date]}),e.jsxs("p",{children:["📅 ",e.jsx("strong",{children:"تاريخ الانتهاء:"})," ",t.end_date]}),e.jsxs("p",{children:["📌 ",e.jsx("strong",{children:"عدد البنود:"})," ",(i=t.tasks)==null?void 0:i.length]})]}),e.jsx("h3",{className:"text-md font-bold mb-2 text-gray-700",children:"📝 مهام المشروع"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-right border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{className:"text-gray-700",children:[e.jsx("th",{className:"p-2 border",children:"رقم البند"}),e.jsx("th",{className:"p-2 border",children:"اسم البند"}),e.jsx("th",{className:"p-2 border",children:"تاريخ البدء"}),e.jsx("th",{className:"p-2 border",children:"تاريخ الانتهاء"}),e.jsx("th",{className:"p-2 border",children:"الكمية"}),e.jsx("th",{className:"p-2 border text-green-700",children:"المنفذ"}),e.jsx("th",{className:"p-2 border text-red-600",children:"المتبقي"}),e.jsx("th",{className:"p-2 border text-red-600",children:"الحالة"})]})}),e.jsx("tbody",{children:(c=t.tasks)==null?void 0:c.map((r,a)=>{var m;return e.jsxs(l.Fragment,{children:[e.jsxs("tr",{className:`hover:border ${r.quantity-r.quantity_done<1?"bg-green-100":"bg-red-100"}`,children:[e.jsx("td",{className:"p-2 border font-medium text-gray-800",children:r.task_number}),e.jsx("td",{className:"p-2 border font-medium text-gray-800",children:r.title}),e.jsx("td",{className:"p-2 border text-gray-600",children:r.start_date}),e.jsx("td",{className:"p-2 border text-gray-600",children:r.end_date}),e.jsx("td",{className:"p-2 border text-center text-blue-600",children:r.quantity}),e.jsx("td",{className:"p-2 border text-center text-green-600 font-semibold",children:r.unit==="collaborative"?r.quantity_done/r.progress.length:r.quantity_done}),e.jsx("td",{className:"p-2 border text-center text-red-500 font-semibold",children:r.quantity-r.quantity_done<1?0:r.quantity-r.quantity_done}),e.jsx("td",{className:`p-2 border text-center  font-semibold ${r.quantity-r.quantity_done<1?"text-green-500":"bg-red-500 text-white"}`,children:r.unit==="collaborative"?r.quantity-r.quantity_done/r.progress.length===0?"مكتمل":"غير مكتمل":r.quantity-r.quantity_done===0?"مكتمل":"غير مكتمل"})]}),((m=r.progress)==null?void 0:m.length)>0&&e.jsx("tr",{className:"bg-white border-b",children:e.jsx("td",{colSpan:"6",className:"p-2",children:e.jsxs("div",{className:"mt-2 bg-gray-50 p-2 rounded-lg border text-sm",children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"تفاصيل التقدم:"}),e.jsxs("table",{className:"min-w-full text-sm border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"الموظف"}),e.jsx("th",{className:"p-2 border",children:"التاريخ"}),e.jsx("th",{className:"p-2 border",children:"الكمية المنجزة"})]})}),e.jsx("tbody",{children:r.progress.map((d,j)=>{var h;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border text-gray-700",children:((h=d.user)==null?void 0:h.name)||"غير معروف"}),e.jsx("td",{className:"p-2 border text-gray-600",children:d.date}),e.jsx("td",{className:"p-2 border text-center text-blue-600 font-medium",children:d.quantity_done})]},j)})})]})]})})})]},r.id||a)})})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-bold mb-2 text-gray-700",children:"👷‍♂️ فريق العمل"}),e.jsxs("ul",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-sm text-gray-700",children:[(o=t.users)==null?void 0:o.map((r,a)=>e.jsxs("li",{className:"bg-gray-100 border border-gray-200 rounded px-3 py-2",children:["👤 ",r.name]},r.id||a)),((x=t.users)==null?void 0:x.length)===0&&e.jsx("li",{className:"text-gray-400 italic",children:"لا يوجد موظفون مسجلون"})]})]})]})},g)})]})})}export{_ as default};
