import{r as p,u as j,j as e,H as N,R as g,b as v}from"./app-BMMUUtt3.js";import{A as w}from"./AuthenticatedLayout-DX-eAp2J.js";import{D as y}from"./DeleteButton-Q9gpM-Hg.js";import"./ApplicationLogo-DACMkUDR.js";import"./ResponsiveNavLink-F9ICIPml.js";import"./transition-S_Iy5K2R.js";import"./HandelDelete-BuXuKjoZ.js";function R({rewards:o,users:i}){const[d,c]=p.useState(!1),{data:l,setData:n,post:m,reset:x,errors:r}=j({user_id:"",reward_date:"",type:"",reason:"",points:1,amount:""}),u=(s,a)=>{v.post(route("admin.rewards.spent",{id:a}))};return e.jsxs(w,{children:[e.jsx(N,{title:"نظام المكافآت"}),e.jsxs("div",{className:"max-w-5xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md ",children:[e.jsxs("div",{className:"bg-white flex items-center justify-between mb-4 p-2 sticky top-0",children:[e.jsx("h1",{className:"text-2xl font-bold  text-center",children:"نظام مكافآت الموظفين"}),e.jsx("button",{onClick:()=>c(!d),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:d?"إغلاق النموذج":"إضافة مكافأة"})]}),e.jsx("hr",{className:"mb-12"}),!d&&e.jsx(g.Fragment,{children:o.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"لا توجد مكافآت حتى الآن."}):o.map((s,a)=>e.jsxs("div",{className:"mb-8 border-b pb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-indigo-600",children:s.user}),e.jsxs("table",{className:"w-full mt-3 text-sm border border-gray-300 rounded",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border",children:"التاريخ"}),e.jsx("th",{className:"p-2 border",children:"السبب"}),e.jsx("th",{className:"p-2 border",children:"القيمة"}),e.jsx("th",{className:"p-2 border",children:"-"})]})}),e.jsx("tbody",{children:s.records.map((t,h)=>e.jsxs("tr",{className:"text-center hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 border",children:t.date}),e.jsx("td",{className:"p-2 border",children:t.reason}),e.jsx("td",{className:"p-2 border",children:t.amount}),e.jsxs("td",{className:"p-2 border",children:[t.type!=="spent"&&e.jsx("button",{onClick:b=>u(b,t.id),className:"inline-block bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"صرف"}),e.jsx(y,{id:t.id,routeName:"employee.reward.delete"})]})]},h))})]})]},a))})]}),e.jsx("div",{className:"flex justify-end mb-4"}),d&&e.jsxs("form",{onSubmit:s=>{s.preventDefault(),m(route("rewards.store"),{onSuccess:()=>{x(),c(!1)}})},className:"mb-8 bg-gray-50 p-6 rounded-md shadow",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-700",children:"إضافة مكافأة جديدة"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"الموظف"}),e.jsxs("select",{value:l.user_id,onChange:s=>n("user_id",s.target.value),className:"w-full border rounded px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"اختر موظفًا"}),i.map((s,a)=>e.jsx("option",{value:s.id,children:s.name},a))]}),r.user_id&&e.jsx("p",{className:"text-red-500 text-sm",children:r.user_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"التاريخ"}),e.jsx("input",{type:"date",value:l.reward_date,onChange:s=>n("reward_date",s.target.value),className:"w-full border rounded px-3 py-2",required:!0}),r.reward_date&&e.jsx("p",{className:"text-red-500 text-sm",children:r.reward_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"القيمة"}),e.jsx("input",{type:"number",value:l.amount,onChange:s=>n("amount",s.target.value),className:"w-full border rounded px-3 py-2",required:!0}),r.amount&&e.jsx("p",{className:"text-red-500 text-sm",children:r.amount})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"السبب"}),e.jsx("textarea",{value:l.reason,onChange:s=>n("reason",s.target.value),className:"w-full border rounded px-3 py-2",rows:"3"}),r.reason&&e.jsx("p",{className:"text-red-500 text-sm",children:r.reason})]})]}),e.jsx("div",{className:"mt-4 text-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"حفظ المكافأة"})})]})]})}export{R as default};
