import{a as j,r as u,u as N,j as e,L as h}from"./app-DfmyUBv9.js";import{A as g}from"./AuthenticatedLayout-Ck0OovOP.js";import"./ApplicationLogo-BGRTycno.js";import"./ResponsiveNavLink-DBL_1jJJ.js";import"./transition-CDy15Wy9.js";function C(){const{items:m,flash:r,errors:c}=j().props,[d,t]=u.useState(null),[i,a]=u.useState(null),{data:o,setData:l,post:p,reset:b}=N({item_id:"",type:"",quantity:"",note:""}),n=(s,x)=>{t(s),a(x),l({item_id:s.id,type:x,quantity:"",note:""})},y=s=>{s.preventDefault(),p(route("transactions.store"),{preserveScroll:!0,onSuccess:()=>{b(),t(null),a(null)}})};return e.jsx(g,{children:e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"إدارة الأصناف"}),e.jsx(h,{href:route("items.create"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"+ إضافة صنف"})]}),r.success&&e.jsx("div",{className:"mb-4 text-green-600",children:r.success}),c.quantity&&e.jsx("div",{className:"mb-4 text-red-600",children:c.quantity}),e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 text-right",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"الاسم"}),e.jsx("th",{className:"px-4 py-2",children:"الوحدة"}),e.jsx("th",{className:"px-4 py-2",children:"الكمية"}),e.jsx("th",{className:"px-4 py-2",children:"إجراءات"})]})}),e.jsx("tbody",{children:m.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:s.unit}),e.jsx("td",{className:`px-4 py-2 ${s.alert_quantity&&s.quantity<=s.alert_quantity?"text-red-600 font-bold":""}`,children:s.quantity}),e.jsxs("td",{className:"px-4 py-2 space-x-2",children:[e.jsx("button",{onClick:()=>n(s,"out"),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"صرف"}),e.jsx("button",{onClick:()=>n(s,"in"),className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600",children:"توريد"}),e.jsx("button",{onClick:()=>n(s,"return"),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600",children:"مرتجع"}),e.jsx(h,{href:route("items.edit",s.id),className:"bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600",children:"تعديل"})]})]},s.id))})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["عملية ",i==="in"?"توريد":i==="out"?"صرف":"مرتجع"," - ",d.name]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"الكمية"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-3 py-2",value:o.quantity,onChange:s=>l("quantity",s.target.value),required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"ملاحظات (اختياري)"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",value:o.note,onChange:s=>l("note",s.target.value)})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(null),a(null)},className:"px-4 py-2 bg-gray-300 rounded",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"حفظ"})]})]})]})})]})})}export{C as default};
