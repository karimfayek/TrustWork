import{a as w,r as o,j as s}from"./app-jnlzYPnu.js";import{A as S}from"./AuthenticatedLayout-CFg_SBuZ.js";import b from"./AttForm-B6HKOFyq.js";import{D}from"./DeleteButton-BvoSnSIJ.js";import"./ApplicationLogo-Cq0qfxZU.js";import"./ResponsiveNavLink-mSvN2t_P.js";import"./transition-D0UWB7qs.js";import"./HandelDelete-CwoCuBxi.js";function O({atts:d,users:p,projects:u,showManual:j=!0,customers:g}){const m=w().props.auth.user,y=m==null?void 0:m.role,[l,h]=o.useState({from:new Date().toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[r,N]=o.useState(""),[x,f]=o.useState(d);console.log(x);const v=()=>{const e=l.from,t=l.to,i=d.filter(n=>{const c=r?n.user_id==r:!0,a=new Date(n.check_in_time).toISOString().split("T")[0],_=a>=e&&a<=t;return c&&_});f(i)};return o.useEffect(()=>{v()},[l,r,d]),s.jsxs(S,{children:[s.jsx(b,{projects:u,users:p,showManual:j,customers:g}),y!=="proj"&&s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 mt-6",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[" ",".. الحضور والانصراف لكل الموظفين"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{children:"من:"}),s.jsx("input",{type:"date",value:l.from,onChange:e=>h(t=>({...t,from:e.target.value}))}),s.jsx("label",{children:"إلى:"}),s.jsx("input",{type:"date",value:l.to,onChange:e=>h(t=>({...t,to:e.target.value}))})]}),s.jsxs("select",{name:"user",id:"user",value:r,onChange:e=>N(e.target.value),children:[s.jsx("option",{value:"",children:"اختر الموظف"}),p.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[s.jsx("thead",{className:"bg-gray-100 text-gray-700",children:s.jsxs("tr",{className:"text-right",children:[s.jsx("th",{className:"px-6 py-3 ",children:" الموظف"}),s.jsx("th",{className:"px-6 py-3 ",children:" التاريخ"}),s.jsx("th",{className:"px-6 py-3 ",children:"المكان"}),s.jsx("th",{className:"px-6 py-3 ",children:" الوقت"}),s.jsx("th",{className:"px-6 py-3 ",children:"الانصراف"}),s.jsx("th",{className:"px-6 py-3 ",children:"بواسطة"}),s.jsx("th",{className:"px-6 py-3 ",children:"- "})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:x&&x.map(e=>{var t,i,n,c,a;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:(t=e.user)==null?void 0:t.name}),s.jsx("td",{className:"px-6 py-4",children:new Date(e.check_in_time).toLocaleDateString("ar-EG")}),s.jsxs("td",{className:"px-6 py-4",children:[e.project&&((i=e.project)==null?void 0:i.name),e.visit&&((c=(n=e.visit)==null?void 0:n.customer)==null?void 0:c.name),e.type==="internal"&&"داخل الشركة",e.type==="external"&&e.customer]}),s.jsxs("td",{className:"px-6 py-4",children:[e.in_location!==null&&new Date(e.check_in_time).toLocaleTimeString("en-US"),e.in_location!=="غير محدد"&&e.in_location!==null&&s.jsxs("a",{href:"https://www.google.com/maps?q="+(e==null?void 0:e.in_location),target:"_blank",className:"text-blue-600 underline",children:[" ","- لوكيشن"]})]}),s.jsxs("td",{className:"px-6 py-4",children:[e.out_location!==null&&new Date(e.check_out_time).toLocaleTimeString("en-US"),e.out_location!=="غير محدد"&&e.out_location!==null&&s.jsxs("a",{href:"https://www.google.com/maps?q="+(e==null?void 0:e.out_location),target:"_blank",className:"text-blue-600 underline",children:[" ","- لوكيشن"]})]}),s.jsx("td",{className:"px-6 py-4",children:(a=e.by)==null?void 0:a.name}),s.jsx("td",{className:"px-6 py-4 space-x-2 rtl:space-x-reverse",children:s.jsx(D,{id:e.id,routeName:"admin.att.delete"})})]},e.id)})})]})})]})]})}export{O as default};
