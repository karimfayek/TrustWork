import{a as J,r as a,u as K,j as e,R as k,b as o}from"./app-BW0XY6q3.js";import{D as O}from"./DeleteButton-CpUOUsQ4.js";import{A as Q}from"./AuthenticatedLayout-DmTnd6uR.js";import T from"./AdvancesList-DefdsxiC.js";import"./HandelDelete-CWnas0Yh.js";import"./ApplicationLogo-U0FYEhI-.js";import"./ResponsiveNavLink-CKHuipxy.js";import"./transition-DAtcZl1K.js";function de(){const{pendingAdvances:D,users:y,activeProjects:q,advances:r}=J().props,[V,X]=a.useState(null),[Y,Z]=a.useState(!1),[i,S]=a.useState(null),[c,u]=a.useState(""),[j,A]=a.useState(""),[C,_]=a.useState(null),{data:m,setData:d,post:E,processing:F,reset:I,errors:p}=K({amount:"",note:"",user_id:"",project_id:"",method:""}),P=t=>{d("user_id",t)},M=()=>{o.post(route("advance.settlement"),{amount:c,advance_id:i,asa:"settle",file:C,description:j},{preserveScroll:!0,onSuccess:()=>{u("")}})},R=()=>{o.post(route("employee.expense.store"),{amount:c,advance_id:i,asa:"expense",file:C,description:j},{preserveScroll:!0,onSuccess:()=>{u(""),_(null),A("")}})},[b,x]=a.useState(D),L=t=>{console.log(t),o.post(route("admin.advance.delete"),{id:t},{preserveScroll:!0,onSuccess:()=>{x(s=>s.filter(n=>n.id!==t)),h(!1),w(""),f(null)}})},[U,h]=a.useState(!1),[g,f]=a.useState(null),[N,w]=a.useState(""),z=t=>{f(t),h(!0)},B=()=>{const t=b.find(s=>s.id===g);o.post(route("admin.advance.status"),{advance_id:g,status:"accepted",amount:t.amount,note:t.note,payment_method:N},{preserveScroll:!0,onSuccess:()=>{x(s=>s.filter(n=>n.id!==g)),h(!1),w(""),f(null)}})},W=(t,s)=>{const n=b.find(l=>l.id===t);o.post(route("admin.advance.status"),{advance_id:t,status:s,amount:n.amount,note:n.note},{preserveScroll:!0,onSuccess:()=>{x(l=>l.filter(v=>v.id!==t))}})},G=(t,s,n)=>{x(l=>l.map((v,H)=>H===t?{...v,[s]:n}:v))};return e.jsxs(Q,{children:[e.jsx(T,{advances:b,type:"pending",onDelete:L,onApprove:z,onReject:W,onUpdate:G,admin:!0}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center px-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow max-w-2xl mt-4  border border-gray-200 mx-auto",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Ø¥Ø¶Ø§ÙØ© Ø¹Ù‡Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©"}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),console.log("postadvance"),E(route("admin.advance.store"),{preserveScroll:!0,onSuccess:()=>I()})},children:[e.jsxs("select",{name:"user_id",className:"w-full border p-2 mb-2",onChange:t=>P(t.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¸Ù"}),y.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("input",{required:!0,type:"number",onWheel:t=>t.target.blur(),placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº",value:m.amount,onChange:t=>d("amount",t.target.value),className:"w-full border p-2 mb-2"}),p.amount&&e.jsx("div",{className:"text-red-600",children:p.amount}),e.jsx("input",{required:!0,type:"text",placeholder:"Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ø§Ù„Ø¹Ù‡Ø¯Ø©",value:m.note,onChange:t=>d("note",t.target.value),className:"w-full border p-2 mb-2"}),p.note&&e.jsx("div",{className:"text-red-600",children:p.note}),e.jsxs("select",{required:!0,value:m.project_id,onChange:t=>d("project_id",t.target.value),className:"w-full border p-2 mb-2",children:[e.jsx("option",{value:"",children:"Ù„Ù„Ù…Ø´Ø±ÙˆØ¹"}),q.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id)),e.jsx("option",{value:"null",children:"Ø§Ø®Ø±Ù‰"})]}),e.jsxs("select",{required:!0,className:"w-full p-2 border rounded mb-4",value:m.method,onChange:t=>d("method",t.target.value),children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© --"}),e.jsx("option",{value:"cash",children:"ÙƒØ§Ø´"}),e.jsx("option",{value:"wallet",children:"Ù…Ø­ÙØ¸Ø©"}),e.jsx("option",{value:"insta",children:"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"})]}),e.jsx("button",{type:"submit",disabled:F,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Ø­ÙØ¸ Ø§Ù„Ø¹Ù‡Ø¯Ø©"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ø§Ø¶Ø§ÙÙ‡ ØªØ³ÙˆÙŠÙ‡"}),e.jsxs("select",{required:!0,className:"w-full p-2 border rounded mb-4",value:i,onChange:t=>S(t.target.value),children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù‡Ø¯Ø© --"}),r==null?void 0:r.map(t=>{var s;return e.jsx(k.Fragment,{children:t.is_opened&&e.jsxs("option",{value:t.id,children:[(s=t.user)==null?void 0:s.name," -"," ",t.amount," - ",t.note]})},t.id)})]}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:c,min:1,onChange:t=>u(t.target.value)}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:()=>M(),className:"bg-green-500 text-white px-4 py-2 rounded",children:"ØªØ£ÙƒÙŠØ¯"})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ø§Ø¶Ø§ÙÙ‡ Ù…ØµØ±ÙˆÙ"}),e.jsxs("select",{required:!0,className:"w-full p-2 border rounded mb-4",value:i,onChange:t=>S(t.target.value),children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù‡Ø¯Ø© --"}),r==null?void 0:r.map(t=>{var s;return e.jsx(k.Fragment,{children:e.jsxs("option",{value:t.id,children:[(s=t.user)==null?void 0:s.name," - ",t.amount," ","- ",t.note]})},t.id)})]}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:c,min:1,onChange:t=>u(t.target.value)}),e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ø§ÙŠØµØ§Ù„"}),e.jsx("input",{required:!0,type:"file",className:"w-full p-2 border rounded mb-4",onChange:t=>_(t.target.files[0])}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„ÙˆØµÙ *"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded mb-4",value:j,onChange:t=>A(t.target.value)})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:()=>R(),className:"bg-green-500 text-white px-4 py-2 rounded",children:"ØªØ£ÙƒÙŠØ¯"})})]})]}),e.jsx("h2",{className:"text-2xl font-semibold mb-2 border-t underline",children:"Ø§Ù„Ø¹Ù‡Ø¯ Ø§Ù„Ù…ÙØ³ØªÙ„Ù…Ø©"}),y.map(t=>t.advances.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold mb-2",children:t.name}),Array.isArray(t.advances)&&t.advances.length>0?e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:t.advances.map((s,n)=>{var l;return e.jsx("li",{className:"border-b py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{children:["ğŸ“…"," ",s.given_at||s.status]}),e.jsxs("div",{children:["ğŸ’µ ",s.amount," Ø¬.Ù…"]}),e.jsxs("div",{children:["ğŸ’¸ ",s.method," "]}),e.jsxs("div",{children:["ğŸ“ ",s.note]}),e.jsxs("div",{children:["ğŸ“"," ",((l=s.project)==null?void 0:l.name)||"Ø§Ø®Ø±Ù‰"]})]}),e.jsx("div",{children:e.jsx(O,{id:s.id,routeName:"admin.advance.delete"})})]})},n)})}):e.jsx("p",{className:"text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ù„ÙÙŠØ§Øª"})]},t.id))]}),U&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¹Ù‡Ø¯Ø©"}),e.jsxs("select",{className:"w-full p-2 border rounded mb-4",value:N,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© --"}),e.jsx("option",{value:"cash",children:"ÙƒØ§Ø´"}),e.jsx("option",{value:"wallet",children:"Ù…Ø­ÙØ¸Ø©"}),e.jsx("option",{value:"insta",children:"Ø§Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ"}),e.jsx("option",{value:"bank",children:"ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>h(!1),className:"bg-gray-200 px-4 py-2 rounded",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:B,disabled:!N,className:"bg-green-500 text-white px-4 py-2 rounded",children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©"})]})]})})]})}export{de as default};
