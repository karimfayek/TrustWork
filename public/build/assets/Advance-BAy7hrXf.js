import{a as q,u as h,j as e}from"./app-BMMUUtt3.js";import{U as E}from"./UserLayout-DwL357vd.js";import A from"./LoanRequestForm-FvsS7B_0.js";import{I as C}from"./InputLabel-DSJSc-3T.js";import"./ApplicationLogo-DACMkUDR.js";import"./ResponsiveNavLink-F9ICIPml.js";import"./transition-S_Iy5K2R.js";function k(){const{advances:o,expenses:c,totalAdvance:p,totalExpense:v,remaining:b,activeProjects:j,finalSalary:g}=q().props,{data:i,setData:l,post:N,processing:f,reset:w,errors:m}=h({amount:"",note:""}),{data:t,setData:d,post:y,processing:_,reset:D,errors:a}=h({amount:"",description:"",advance_id:"",file:null});return e.jsx(E,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"العهدة المالية"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"إجمالي العهدة:"})," ",p," ج"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"إجمالي المصروفات:"})," ",v," ج"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"المتبقي:"})," ",b," ج"]})]}),e.jsxs("div",{className:"sm:grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"العهد "}),e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:o.map((s,n)=>{var r;return e.jsxs("li",{className:"border-b py-2",children:[e.jsxs("div",{children:["📅 ",s.given_at||"بانتظار الموافقه"]}),e.jsxs("div",{children:["💵 ",s.amount," ج"]}),e.jsxs("div",{children:["📝 ",s.note]}),e.jsxs("div",{children:["📝 المشروع : ",(r=s.project)==null?void 0:r.name]}),e.jsxs("div",{children:["📝 ",s.status]})]},n)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"المصروفات"}),e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:c.map((s,n)=>{var r,u,x;return e.jsxs("li",{className:"border-b py-2",children:[e.jsxs("div",{children:["📅 ",s.spent_at]}),e.jsxs("div",{children:["💸 ",s.amount," ج"]}),e.jsxs("div",{children:["📝 ",s.description]}),e.jsxs("div",{children:["📝 المشروع : ",(u=(r=s.advance)==null?void 0:r.project)==null?void 0:u.name]}),e.jsxs("div",{children:["اضيفت بواسطة :  ",(x=s.by)==null?void 0:x.name]})]},n)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"السلف"}),e.jsx("ul",{className:"bg-white p-4 rounded shadow",children:c.map((s,n)=>e.jsxs("li",{className:"border-b py-2",children:[e.jsxs("div",{children:["📅 ",s.spent_at]}),e.jsxs("div",{children:["💸 ",s.amount," ج"]}),e.jsxs("div",{children:["📝 ",s.description]})]},n))})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"طلب عهدة "}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),N(route("employee.advance.store"),{onSuccess:()=>w()})},children:[e.jsx("input",{type:"number",placeholder:"المبلغ",value:i.amount,onChange:s=>l("amount",s.target.value),className:"w-full border p-2 mb-2",required:!0}),e.jsx("input",{type:"text",placeholder:"الغرض من العهدة",value:i.note,onChange:s=>l("note",s.target.value),className:"w-full border p-2 mb-2",required:!0}),m.amount&&e.jsx("div",{className:"text-red-600",children:m.amount}),e.jsxs("select",{required:!0,value:i.project_id,onChange:s=>l("project_id",s.target.value),className:"w-full border p-2 mb-2",children:[e.jsx("option",{value:"",children:"للمشروع"}),j.map(s=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.name},s==null?void 0:s.id))]}),e.jsx("button",{type:"submit",disabled:f,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"طلب العهدة"})]})]}),e.jsx(A,{maxAmount:g*.25}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"إضافة مصروف"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),y(route("employee.expense.store"),{onSuccess:()=>D()})},children:[e.jsx("input",{required:!0,type:"number",placeholder:"المبلغ",value:t.amount,onChange:s=>d("amount",s.target.value),className:"w-full border p-2 mb-2"}),a.amount&&e.jsx("div",{className:"text-red-600",children:a.amount}),e.jsx("input",{required:!0,type:"text",placeholder:"الوصف",value:t.description,onChange:s=>d("description",s.target.value),className:"w-full border p-2 mb-2"}),a.description&&e.jsx("div",{className:"text-red-600",children:a.description}),e.jsxs("select",{required:!0,value:t.advance_id,onChange:s=>d("advance_id",s.target.value),className:"w-full border p-2 mb-2",children:[e.jsx("option",{value:"",children:"من العهدة"}),o.map(s=>{var n;return e.jsxs("option",{value:s.id,children:[(n=s.project)==null?void 0:n.name," - ",s.amount," جم"]},s.id)})]}),a.advance_id&&e.jsx("div",{className:"text-red-600",children:a.advance_id}),e.jsx(C,{children:"ارفق الايصال"}),e.jsx("input",{type:"file",onChange:s=>d("file",s.target.files[0]),className:"bg-[#FF2D20]/10 border border-black mb-2 w-full",required:!0}),a.file&&e.jsx("div",{className:"text-red-600",children:a.file}),e.jsx("button",{type:"submit",disabled:_,className:"bg-green-500 text-white px-4 py-2 rounded",children:"حفظ المصروف"})]})]})]})]})})}export{k as default};
