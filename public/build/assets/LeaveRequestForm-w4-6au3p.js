import{u as j,a as g,r as n,j as e}from"./app-BW0XY6q3.js";function w({maxAmount:y}){const{data:s,setData:l,post:m,processing:u,reset:x,errors:a,setError:v}=j({type:"regular",reason:"",leave_date:""}),{props:f}=g(),d=f.errors.message,[r,i]=n.useState(!0),[p,b]=n.useState(!1);n.useEffect(()=>{if(!(s!=null&&s.leave_date)||!(s!=null&&s.type))return;const t=new Date;t.setHours(0,0,0,0);const c=new Date(s.leave_date);c.setHours(0,0,0,0);const o=(c.getTime()-t.getTime())/(1e3*60*60*24);s.type==="regular"&&o<3?(i(!1),console.log(o,"daysDiff not valid")):(i(!0),console.log(o,"daysDiff valid"))},[s.leave_date,s.type]);const h=t=>{if(t.preventDefault(),!r){v("amount","يمكن فقط طلب الاجازة الاعتيادى قبلها ب ثلاث ايام.");return}m("/leaves/request",{preserveScroll:!0,onSuccess:()=>{b(!0),x()}})};return e.jsxs("form",{onSubmit:h,className:" bg-white p-4  shadow",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"طلب اجازة"}),!r&&e.jsx("div",{className:"text-red-600 font-medium mb-4",children:"يمكن فقط طلب الاجازة الاعتيادى قبلها ب ثلاث ايام."}),d&&e.jsx("div",{className:"text-red-600 font-medium mb-4",children:d}),p&&e.jsx("div",{className:"text-green-600 font-medium mb-4",children:"تم تقديم طلب الإجازة بنجاح. في انتظار الموافقة."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium",children:" النوع"}),e.jsxs("select",{className:"w-full border rounded px-3 py-2",value:s.type,onChange:t=>l("type",t.target.value),children:[e.jsx("option",{value:"regular",children:" اعتيادية "}),e.jsx("option",{value:"casual",children:"عارضة "})]}),a.type&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.type})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium",children:"التاريخ"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:s.leave_date,onChange:t=>l("leave_date",t.target.value)}),a.leave_date&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.leave_date})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block font-medium",children:"السبب"}),e.jsx("textarea",{className:"w-full border rounded px-3 py-2",value:s.reason,onChange:t=>l("reason",t.target.value)}),a.reason&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:a.reason})]}),e.jsx("button",{type:"submit",disabled:u||!r,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إرسال الطلب"})]})}export{w as default};
