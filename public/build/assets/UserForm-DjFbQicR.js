import{u as w,a as k,r as C,j as a,R as F}from"./app-BELKTjV-.js";import{I as r}from"./InputLabel-DInpeHPN.js";import{T as o}from"./TextInput-Pv7-E4Hb.js";import{P as S}from"./PrimaryButton-C8a5fR5U.js";import{I as m}from"./InputError-BME5oFSa.js";function R({user:s,allRoles:h}){var p,j,y;((p=s==null?void 0:s.salary)==null?void 0:p.final_salary)*.65;const{data:l,setData:t,post:g,processing:v,errors:n}=w({name:(s==null?void 0:s.name)||"",role:(s==null?void 0:s.role)||"",final_salary:((j=s==null?void 0:s.salary)==null?void 0:j.final_salary)||"",base_salary:((y=s==null?void 0:s.salary)==null?void 0:y.base_salary)||"",email:(s==null?void 0:s.email)||"",password:"",phone:(s==null?void 0:s.phone)||"",status:s==null?void 0:s.status,hire_date:(s==null?void 0:s.hire_date)||"",offdayestype:(s==null?void 0:s.offdayestype)||"",temporary:(s==null?void 0:s.temporary)||!1,must_change_password:s.must_change_password,roles:(s==null?void 0:s.roles)||[]}),i=k().props.auth.user;console.log(i,"logeninuser");const b=e=>{const c=Array.from(e.target.selectedOptions,d=>d.value);t(d=>({...d,roles:c}))},f=e=>{isNaN(e)?t("final_salary",e):t(c=>({...c,final_salary:e,base_salary:e*.65}))},u=e=>{e.preventDefault(),g(route("admin.user.update",s.id))},[x,N]=C.useState(!1),_=e=>{e.preventDefault(),N(!x)};return a.jsxs("form",{onSubmit:u,className:"space-y-6 mb-8",children:[a.jsxs("div",{children:[a.jsx(r,{htmlFor:"name",value:"اسم الموظف"}),a.jsx(o,{id:"name",type:"text",value:l.name,className:"mt-1 block w-full",onChange:e=>t("name",e.target.value)}),a.jsx(m,{message:n.name,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"email",value:"الايميل"}),a.jsx(o,{id:"email",type:"text",value:l.email,className:"mt-1 block w-full",onChange:e=>t("email",e.target.value)}),a.jsx(m,{message:n.email,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"phone",value:"رقم التليفون "}),a.jsx(o,{id:"phone",type:"text",value:l.phone,className:"mt-1 block w-full",onChange:e=>t("phone",e.target.value)}),a.jsx(m,{message:n.phone,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"hire_date",value:"تاريخ التعيين  "}),a.jsx(o,{id:"hire_date",type:"date",value:l.hire_date,className:"mt-1 block w-full",onChange:e=>t("hire_date",e.target.value)}),a.jsx(m,{message:n.hire_date,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"role",value:"الدور"}),a.jsx("select",{multiple:!0,value:l.roles,onChange:b,className:"w-1/2 border rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 mt-1 block ",children:h&&h.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))}),a.jsx(m,{message:n.roles,className:"mt-2"})]}),a.jsx("div",{children:a.jsxs("p",{children:[s.role," "]})}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"password",value:"الباسورد"}),a.jsx(o,{id:"password",type:"text",value:l.password,className:"mt-1 block w-full",onChange:e=>t("password",e.target.value)}),a.jsx(m,{message:n.password,className:"mt-2"})]}),a.jsx("button",{onClick:e=>_(e),className:"underline cursor-pointer",children:"المرتب"}),["admin"].some(e=>{var c;return(c=i==null?void 0:i.rolesnames)==null?void 0:c.includes(e)})&&a.jsx(F.Fragment,{children:x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(r,{htmlFor:"final_salary",value:"الراتب النهائى"}),a.jsx(o,{id:"final_salary",type:"number",onWheel:e=>e.target.blur(),value:l.final_salary,className:"mt-1 block w-full",onChange:e=>f(e.target.value)}),a.jsx(m,{message:n.final_salary,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"base_salary",value:"الراتب الاساسى"}),a.jsx(o,{id:"base_salary",type:"number",onWheel:e=>e.target.blur(),value:l.base_salary,className:"mt-1 block w-full",onChange:e=>t("base_salary",e.target.value),readOnly:!0}),a.jsx(m,{message:n.base_salary,className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(r,{htmlFor:"base_salary",value:" المتغير"}),a.jsx(o,{id:"base_salary",type:"number",onWheel:e=>e.target.blur(),value:Number(l.final_salary)-Number(l.base_salary),className:"mt-1 block w-full",readOnly:!0}),a.jsx(m,{message:n.base_salary,className:"mt-2"})]})]})}),a.jsx("div",{className:"mt-4",children:a.jsx("label",{className:"flex items-center",children:a.jsxs("select",{value:l.offdayestype,required:!0,onChange:e=>t("offdayestype",e.target.value),className:"w-full",children:[a.jsx("option",{value:"",disabled:!0,selected:!0,children:"ايام الاجازات"}),a.jsx("option",{value:"1",children:" جمعه"}),a.jsx("option",{value:"3",children:" خميس + جمعه"}),a.jsx("option",{value:"2",children:" جمعه + سبت"})]})})}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.must_change_password,onChange:e=>t("must_change_password",e.target.checked)}),a.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"تغيير كلمة السر عند أول دخول"})]})}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.temporary||!1,onChange:e=>t("temporary",e.target.checked)}),a.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"موظف مؤقت"})]})}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.status,onChange:e=>t("status",e.target.checked)}),a.jsx("span",{className:"mr-2 text-sm text-gray-600",children:" نشط ؟ "})]})}),a.jsx("div",{children:a.jsx(S,{className:"w-full justify-center bg-green-600 hover:bg-green-500",disabled:v,children:"حفظ"})})]})}export{R as default};
