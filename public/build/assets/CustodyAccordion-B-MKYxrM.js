import{r as n,j as e,b as p}from"./app-DfmyUBv9.js";import E from"./ExpenseTimeline-ClV8IUwP.js";function F({custody:t,amountOrig:i,user_id:f,advanceId:h}){var u;const[o,j]=n.useState(!1),[b,r]=n.useState(!1),[c,g]=n.useState(null),[l,N]=n.useState(!1),[a,x]=n.useState(i),[d,v]=n.useState(""),[m,w]=n.useState(null),y=s=>{s.stopPropagation(),N(!0),r(!0)},S=()=>{if(a>i||a<1){alert("Ø§Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ù‡ Ø§ÙƒØ¨Ø± Ù…Ù† ÙˆØ§Ø­Ø¯ ÙˆØ§Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚Ù‰ Ù…Ù† Ø§Ù„Ø³Ù„ÙÙ‡");return}if(l&&!m){g("Ø§Ù„Ù…Ù„Ù Ù…Ø·Ù„ÙˆØ¨");return}if(!d&&l){alert("Ø§Ø¯Ø®Ù„ Ø§Ù„ÙˆØµÙ");return}const s=l?"expense":"settle",C=l?"employee.expense.store":"admin.advance.settlement";p.post(route(C),{amount:a,user_id:f,advance_id:h,asa:s,file:m,description:d},{preserveScroll:!0,onSuccess:()=>{r(!1),x(0),p.reload()}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-xl",children:[e.jsxs("button",{onClick:()=>j(!o),className:"w-full p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",style:{color:t.is_opened?"red":"green"},children:["Ø¹Ù‡Ø¯Ø© #",(u=t.project)==null?void 0:u.name,"-"," ",t.is_opened?"Ù…ÙØªÙˆØ­Ø©":"Ù…ØºÙ„Ù‚Ø©"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.date," â€¢ ",t.amount," EGP"]}),t.is_opened&&e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx("div",{children:e.jsx("button",{onClick:s=>r(!0),className:"text-red-500 hover:underline text-sm",children:"ðŸ—‘ ØªØ³ÙˆÙŠØ©"})}),e.jsx("div",{children:e.jsx("button",{onClick:s=>y(s),className:"text-green-500 hover:underline text-sm",children:"Ø§Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ"})})]})]}),e.jsx("span",{children:o?"âˆ’":"+"})]}),o&&e.jsx("div",{className:"p-4 border-t space-y-4",children:e.jsx(E,{expenses:t.expenses})})]}),b&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:l?"Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØµØ±ÙˆÙ":"Ù…Ø¨Ù„Øº Ø§Ù„ØªØ³ÙˆÙŠØ©"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:a,min:1,max:i,onChange:s=>x(s.target.value)}),l&&e.jsxs(e.Fragment,{children:[c&&e.jsx("p",{className:"text-red-500 text-sm",children:c}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ø§ÙŠØµØ§Ù„"}),e.jsx("input",{required:!0,type:"file",className:"w-full p-2 border rounded mb-4",onChange:s=>w(s.target.files[0])}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„ÙˆØµÙ *"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded mb-4",value:d,onChange:s=>v(s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>r(!1),className:"bg-gray-200 px-4 py-2 rounded",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:S,className:"bg-green-500 text-white px-4 py-2 rounded",children:"ØªØ£ÙƒÙŠØ¯"})]})]})})]})}export{F as default};
