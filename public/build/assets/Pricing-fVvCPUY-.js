import{a as m,r as g,u as v,j as e,H as N}from"./app-k5SopBD2.js";import{I as r}from"./InputLabel-CXRzBChv.js";import{T as i}from"./TextInput-LYJo6PTO.js";import{P as f}from"./PrimaryButton-Bolb70pk.js";import{A as k}from"./AuthenticatedLayout-Gwblcdpo.js";import"./ApplicationLogo-DU4WzsOm.js";import"./ResponsiveNavLink-Da99mX_u.js";import"./transition-C9FumlRJ.js";function H({project:l}){if(m().props.auth.user.email==="sherok@trustits.net")return null;const n=m().props.auth.user;n==null||n.role;const[p,w]=g.useState(l.tasks.map(s=>({id:s.id,title:s.title,up:s.unit_price||"",tp:s.tp||"",quantity:s.quantity||""}))),{data:u,setData:x,post:b,processing:h,errors:T}=v({tasks:p||[],projectId:l.id}),j=s=>{s.preventDefault(),b(route("acc.pricing.set"))},y=(s,o,t)=>{const a=[...u.tasks];a[s][o]=t;const d=Number(a[s].up),c=Number(a[s].quantity);!isNaN(d)&&!isNaN(c)&&(a[s].tp=d*c),x("tasks",a)};return e.jsxs(k,{children:[e.jsx(N,{title:"تسعير مشروع "}),e.jsxs("div",{className:"mx-auto px-6 py-8 bg-white rounded shadow",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:["تسعير مشروع",e.jsx("br",{}),e.jsx("p",{className:"text-2xl text-gray-400",children:l.name})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",value:"اسم المشروع"}),e.jsx("p",{children:l.name})]}),e.jsx("div",{className:"p-4 mb-4 bg-gray-50 rounded border space-y-3 ",children:u.tasks&&u.tasks.map((s,o)=>e.jsxs("div",{className:"p-4 mb-4 bg-gray-50 rounded border space-y-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{className:"mt-3",value:"اسم البند"}),e.jsx(i,{required:!0,type:"text",value:s.title,disabled:!0,className:"opacity-50 mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"سعر الوحدة "}),e.jsx(i,{type:"number",step:"0.01",value:s.up,onWheel:t=>t.target.blur(),onChange:t=>y(o,"up",t.target.value),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(r,{value:"الكمية "}),e.jsx(i,{type:"number",value:s.quantity,className:"opacity-50 mt-1 block w-full",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(r,{value:"السعر الإجمالي"}),e.jsx(i,{type:"number",value:Number(s.tp),readOnly:!0,className:"mt-1 block w-full"})]})]},s.id))}),e.jsx("div",{children:e.jsx(f,{className:"btn btn-green btn-fixed-bottom",disabled:h,children:"حفظ"})})]})]})]})}export{H as default};
