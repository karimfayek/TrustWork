import{r as x,j as e}from"./app-BMMUUtt3.js";import{I as u}from"./InputLabel-DSJSc-3T.js";function k({user:s,acceptedAdvances:l,totalAdvance:i,totalExpense:d,remaining:F}){var o,j;const[n,m]=x.useState({}),[r,p]=x.useState(null),h=Number(n==null?void 0:n.absenceDays)*Number(Number((o=s.salary)==null?void 0:o.base_salary)*.1),b=Number(Number((j=s.salary)==null?void 0:j.base_salary)+Number(n==null?void 0:n.taskScore)+Number(n==null?void 0:n.rewards)-h-Number(n==null?void 0:n.lateScore)+Number(n==null?void 0:n.transportaionFees)-Number(n.lostCostThisMonth)-Number(n.deductions)-Number(n.remaining)).toFixed(2);return x.useEffect(()=>{fetch(`/calc-emp-att/${s.id}/${r}`).then(c=>c.json()).then(c=>m(c))},[r,s.id]),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl text-center underline",children:s.name}),e.jsxs("div",{className:"bg-gray-100 mb-12 p-5 shadow-sm ",children:[e.jsx(N,{month:r,setMonth:p}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(g,{user:s,attData:n}),e.jsx(v,{attData:n,absenceScore:h}),e.jsx(y,{deserved:b}),e.jsx(f,{attData:n}),e.jsx(w,{attData:n}),e.jsx(S,{attData:n})]})]})]})}const N=({month:s,setMonth:l})=>e.jsxs("div",{children:[e.jsx(u,{value:"عرض نتائج",className:"print:hidden"}),e.jsxs("select",{className:"mb-4 w-48 print:hidden",name:"month",id:"month",value:s,onChange:i=>l(i.target.value),children:[e.jsx("option",{value:"null",children:"الى اليوم الحالى"}),e.jsx("option",{value:"1",children:"يناير"}),e.jsx("option",{value:"2",children:"فبراير"}),e.jsx("option",{value:"3",children:"مارس"}),e.jsx("option",{value:"4",children:"ابريل"}),e.jsx("option",{value:"5",children:"مايو"}),e.jsx("option",{value:"6",children:"يونيو"}),e.jsx("option",{value:"7",children:"يوليو"}),e.jsx("option",{value:"8",children:"اغسطس"}),e.jsx("option",{value:"9",children:"سبتمبر"}),e.jsx("option",{value:"10",children:"اكتوبر"}),e.jsx("option",{value:"11",children:"نوفمبر"}),e.jsx("option",{value:"12",children:"ديسمير"})]})]}),g=({user:s,attData:l})=>{var i;return e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"استحقاقات"}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("b",{children:"الاساسي"}),e.jsx("p",{className:"text-green-800",children:Number((i=s.salary)==null?void 0:i.base_salary)})]}),e.jsxs("div",{children:[e.jsx("b",{children:"مستحق لانجاز المهام"}),e.jsx("p",{className:"text-green-800",children:Number(l==null?void 0:l.taskScore).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("b",{children:"الانتقالات"}),e.jsx("p",{className:"text-green-800",children:Number(l==null?void 0:l.transportaionFees).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("b",{children:"المكافئات"}),e.jsx("p",{className:"text-green-800",children:Number(l==null?void 0:l.rewards).toFixed(2)})]})]})},v=({attData:s,absenceScore:l})=>e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"استقطاعات"}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("b",{children:"استقطاعات اساسيه من الراتب"}),e.jsx("p",{className:"text-red-800",children:Number(s==null?void 0:s.deductions).toFixed(2)})]}),e.jsx("b",{children:"التاخيرات"}),e.jsx("p",{className:"text-red-800",children:e.jsx("span",{children:Number(s.lateScore).toFixed(2)})}),e.jsxs("div",{children:[e.jsx("b",{children:"غياب"}),e.jsx("p",{className:"text-red-800",children:e.jsx("span",{children:l})})]}),e.jsxs("div",{children:[e.jsx("b",{children:"مفقودات"}),e.jsx("p",{className:"text-red-800",children:e.jsx("span",{children:s.lostCostThisMonth})})]}),e.jsxs("div",{children:[e.jsx("b",{children:"عهد - مصروفات"}),e.jsx("p",{className:"text-red-800",children:s==null?void 0:s.remaining})]})]}),y=({deserved:s})=>e.jsxs("div",{className:"bg-white shadow sm:rounded-lg sm:p-8 border mt-4 p-2.5 text-center",children:[e.jsx("b",{className:"border p-1.5",children:"المرتب المستحق"}),e.jsxs("p",{dir:"ltr",className:`font-bold mt-3 text-2xl ${s<1?"text-red-500":"text-green-500"}`,children:[e.jsx("br",{}),s]})]}),f=({attData:s})=>e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"الحضور"}),e.jsx("hr",{}),e.jsx("b",{children:"النسبة المئوية للحضور"}),e.jsxs("p",{children:[s==null?void 0:s.attendance_percentage," %"]}),e.jsxs("div",{children:[e.jsx("b",{children:"عدد ايام العمل فى الشهر"}),e.jsxs("p",{children:[s==null?void 0:s.total_days," يوم"]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"عدد ايام الحضور المتأخر"}),e.jsx("p",{children:s==null?void 0:s.late_days})]}),e.jsxs("div",{children:[e.jsx("b",{children:"عدد ايام الحضور خلال الشهر"}),e.jsx("p",{children:s==null?void 0:s.att_days})]}),e.jsxs("div",{children:[e.jsx("b",{children:"عدد ايام الغياب خلال الشهر"}),e.jsx("p",{children:s==null?void 0:s.absenceDays})]})]}),w=({attData:s})=>e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"المهام"}),e.jsx("hr",{}),e.jsx("b",{children:"اجمالى المهام المسندة خلال الشهر"}),e.jsx("p",{children:s==null?void 0:s.alltasks}),e.jsxs("div",{children:[e.jsx("b",{children:"المهام المكتمله"}),e.jsx("p",{children:s==null?void 0:s.tasksCompleted})]}),e.jsxs("div",{children:[e.jsx("b",{children:"النسبه المئوية لاكمال المهام"}),e.jsxs("p",{children:[s==null?void 0:s.completedTasksPercentage," %"]})]})]}),S=({attData:s})=>{var l;return e.jsxs("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"الادوات"}),e.jsx("hr",{}),e.jsx("b",{children:"ادوات معه:"}),e.jsx("ul",{className:"inline-flex flex-wrap",children:s.assignments&&s.assignments.map(i=>{var d;return i.status==="assigned"&&e.jsxs("li",{className:"bg-[#b7ffb7] p-1.5 m-2",children:[(d=i.tool)==null?void 0:d.name," * ",i.quantity]},i.id)})}),e.jsxs("div",{children:[e.jsx("b",{children:"ادوات مفقودة:"}),((l=s.lostThismonth)==null?void 0:l.length)<1&&e.jsx("p",{className:"bg-[#FF2D20]/10 p-1.5 m-2",children:"لا يوجد"}),e.jsx("ul",{className:"inline-flex flex-wrap",children:s.lostThismonth&&s.lostThismonth.map(i=>{var d;return e.jsxs("li",{className:"bg-[#FF2D20]/10 p-1.5 m-2",children:[(d=i.tool)==null?void 0:d.name," * ",i.quantity," * ",i.tool.estimated_value," ج"]},i.id)})})]}),e.jsxs("div",{children:[e.jsx("b",{children:"قيمه الادوات المفقودة"}),e.jsxs("p",{children:[s.lostCostThisMonth," ج"]})]})]})};export{k as default};
