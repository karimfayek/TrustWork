import{a as m,r as c,b as o,j as e,H as g,L as d}from"./app-k5SopBD2.js";import{A as b}from"./AuthenticatedLayout-Gwblcdpo.js";import{P as f}from"./Pagination-Dj7ttqLY.js";import"./ApplicationLogo-DU4WzsOm.js";import"./ResponsiveNavLink-Da99mX_u.js";import"./transition-C9FumlRJ.js";function _({projects:n}){var l;const t=m().props.auth.user,{posts:j,filters:x}=m().props;console.log(n,"projects");const[i,h]=c.useState(x.search||""),p=i!==""?1:n.current_page;c.useEffect(()=>{const s=setTimeout(()=>{o.get(route("admin.dashboard"),{search:i,page:p||1},{preserveState:!0,replace:!0})},900);return()=>clearTimeout(s)},[i]);const u=(s,r)=>{s.preventDefault(),window.confirm("هل أنت متأكد أنك تريد حذف هذا المشروع؟")&&o.post(route("admin.project.delete"),{id:r})};return e.jsxs(b,{children:[e.jsx(g,{title:"Admin Dashboard"}),e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"المشاريع"}),!((l=t==null?void 0:t.rolesnames)!=null&&l.includes("tech"))&&e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-4 w-full md:w-auto",children:[e.jsx("input",{type:"text",value:i,onChange:s=>h(s.target.value),placeholder:"ابحث .. اسم المشروع او الكود او اسم العميل",className:"px-4 py-2 border rounded w-full md:w-64"}),e.jsx(d,{href:route("admin.projects.create"),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-5 py-2 rounded-md shadow text-center",children:"+ إنشاء مشروع جديد"})]})]}),e.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsxs("tr",{className:"text-right",children:[e.jsx("th",{className:"px-6 py-3",children:"اسم المشروع"}),e.jsx("th",{className:"px-6 py-3",children:"الوصف"}),e.jsx("th",{className:"px-6 py-3",children:"تاريخ البدء"}),e.jsx("th",{className:"px-6 py-3",children:"تاريخ الانتهاء"}),e.jsx("th",{className:"px-6 py-3",children:"الخيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-gray-600 max-w-[200px] truncate whitespace-nowrap overflow-hidden",children:s.description}),e.jsx("td",{className:"px-6 py-4",children:s.start_date}),e.jsx("td",{className:`px-6 py-4 ${new Date(s.end_date)<new Date?"text-red-500":""}`,children:s.end_date}),e.jsxs("td",{className:"px-6 py-4 space-x-2 rtl:space-x-reverse",children:[["proj","admin"].some(r=>{var a;return(a=t==null?void 0:t.rolesnames)==null?void 0:a.includes(r)})&&e.jsxs(e.Fragment,{children:[e.jsx(d,{href:route("projects.assignTasks",s.id),className:"mb-2 inline-block bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"إسناد المهام"}),e.jsx(d,{href:route("project.show",s.id),className:"mb-2 inline-block bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"عرض"})]}),["proj","admin","tech"].some(r=>{var a;return(a=t==null?void 0:t.rolesnames)==null?void 0:a.includes(r)})&&e.jsx(d,{href:route("admin.projects.edit",s.id),className:"mb-2 inline-block bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"تعديل"}),["acc","admin"].some(r=>{var a;return(a=t==null?void 0:t.rolesnames)==null?void 0:a.includes(r)})&&e.jsxs(e.Fragment,{children:[e.jsx(d,{href:route("project.extractions.list",s.id),className:"mb-2 inline-block bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"مستخلص"}),t.email!=="sherok@trustits.net"&&e.jsx(d,{href:route("acc.pricing",s.id),className:"mb-2 inline-block bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"تسعير"})]}),["admin"].some(r=>{var a;return(a=t==null?void 0:t.rolesnames)==null?void 0:a.includes(r)})&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:r=>u(r,s.id),className:"inline-block bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md text-xs font-medium",children:"مسح"})})]})]},s.id))})]}),e.jsx(f,{links:n.links})]})]})]})}export{_ as default};
