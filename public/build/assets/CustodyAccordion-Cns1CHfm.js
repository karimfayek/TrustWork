import{r as n,j as e,b}from"./app-C5LVs5cr.js";import k from"./ExpenseTimeline-C-C5Efjt.js";function _({custody:t,amountOrig:a,user_id:g,advanceId:N}){var j;const[i,v]=n.useState(!1),[w,o]=n.useState(!1),[c,x]=n.useState(null),[l,m]=n.useState(!1),[r,y]=n.useState(a),[d,u]=n.useState(""),[p,h]=n.useState(null),C=s=>{s.stopPropagation(),m(!0),o(!0)},S=()=>{if(r>a||r<1){alert("Ø§Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ù‡ Ø§ÙƒØ¨Ø± Ù…Ù† ÙˆØ§Ø­Ø¯ ÙˆØ§Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚Ù‰ Ù…Ù† Ø§Ù„Ø³Ù„ÙÙ‡");return}if(l&&!p){x("Ø§Ù„Ù…Ù„Ù Ù…Ø·Ù„ÙˆØ¨");return}if(!d&&l){alert("Ø§Ø¯Ø®Ù„ Ø§Ù„ÙˆØµÙ");return}const s=l?"expense":"settle",E=l?"employee.expense.store":"admin.advance.settlement";b.post(route(E),{amount:r,user_id:g,advance_id:N,asa:s,file:p,description:d},{preserveScroll:!0,onSuccess:()=>{f(),b.reload()}})},f=()=>{o(!1),m(!1),h(null),x(""),u("")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-xl",children:[e.jsxs("button",{onClick:()=>v(!i),className:"w-full p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",style:{color:t.is_opened?"red":"green"},children:["Ø¹Ù‡Ø¯Ø© #",(j=t.project)==null?void 0:j.name,"-"," ",t.is_opened?"Ù…ÙØªÙˆØ­Ø©":"Ù…ØºÙ„Ù‚Ø©"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.date," â€¢ ",t.amount," EGP"]}),t.is_opened&&e.jsxs("div",{className:"flex gap-2 justify-between",children:[e.jsx("div",{children:e.jsx("button",{onClick:s=>o(!0),className:"text-red-500 hover:underline text-sm",children:"ðŸ—‘ ØªØ³ÙˆÙŠØ©"})}),e.jsx("div",{children:e.jsx("button",{onClick:s=>C(s),className:"text-green-500 hover:underline text-sm",children:"Ø§Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ"})})]})]}),e.jsx("span",{children:i?"âˆ’":"+"})]}),i&&e.jsx("div",{className:"p-4 border-t space-y-4",children:e.jsx(k,{expenses:t.expenses})})]}),w&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:l?"Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØµØ±ÙˆÙ":"Ù…Ø¨Ù„Øº Ø§Ù„ØªØ³ÙˆÙŠØ©"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded mb-4",value:r,min:1,max:a,onChange:s=>y(s.target.value)}),l&&e.jsxs(e.Fragment,{children:[c&&e.jsx("p",{className:"text-red-500 text-sm",children:c}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„Ø§ÙŠØµØ§Ù„"}),e.jsx("input",{required:!0,type:"file",className:"w-full p-2 border rounded mb-4",onChange:s=>h(s.target.files[0])}),e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ø§Ù„ÙˆØµÙ *"}),e.jsx("input",{required:!0,type:"text",className:"w-full p-2 border rounded mb-4",value:d,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>f(),className:"bg-gray-200 px-4 py-2 rounded",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:S,className:"bg-green-500 text-white px-4 py-2 rounded",children:"ØªØ£ÙƒÙŠØ¯"})]})]})})]})}export{_ as default};
