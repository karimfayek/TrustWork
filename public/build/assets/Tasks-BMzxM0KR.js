import{r as a,b as m,j as e,H as p,R as u,L as b}from"./app-BMMUUtt3.js";import{A as j}from"./AuthenticatedLayout-DX-eAp2J.js";import{P as w}from"./Pagination-B_Kx_lhf.js";import"./ApplicationLogo-DACMkUDR.js";import"./ResponsiveNavLink-F9ICIPml.js";import"./transition-S_Iy5K2R.js";function T({tasks:r,projects:n,filters:f}){const[l,g]=a.useState("all"),[N,y]=a.useState(!1),[s,o]=a.useState(r.search||""),i=s!==""?1:n.current_page;return a.useEffect(()=>{const t=setTimeout(()=>{m.get(route("tasks.index"),{search:s,page:i||1},{preserveState:!0,replace:!0})},900);return()=>clearTimeout(t)},[s]),e.jsxs(j,{children:[e.jsx(p,{title:"قائمة المهام"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6 text-center",children:"قائمة المهام"}),e.jsx("div",{className:"mb-4 print:hidden",children:e.jsx("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-4 w-full md:w-auto",children:e.jsx("input",{type:"text",value:s,onChange:t=>o(t.target.value),placeholder:"ابحث .. اسم المشروع او الكود او اسم المهمه",className:"px-4 py-2 border rounded w-full md:w-64"})})}),e.jsxs("div",{className:"overflow-x-auto bg-white rounded shadow",children:[e.jsxs("table",{className:"min-w-full table-auto border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-gray-700 text-right",children:[e.jsx("th",{className:"p-3 border-b",children:"اسم المشروع"}),e.jsx("th",{className:"p-3 border-b",children:"عنوان المهمة"}),e.jsx("th",{className:"p-3 border-b",children:"الوصف"}),e.jsx("th",{className:"p-3 border-b",children:"الموظف المسؤول"}),e.jsx("th",{className:"p-3 border-b",children:" عرض"})]})}),e.jsxs("tbody",{children:[r.data.filter(t=>l==="all"||t.project.id==l).map((t,x)=>{var d,c;return e.jsx(u.Fragment,{children:e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border-b text-gray-600 max-w-[200px] truncate whitespace-nowrap overflow-hidden",children:((d=t.project)==null?void 0:d.name)||"—"}),e.jsx("td",{className:"p-3 border-b text-gray-600 max-w-[200px] truncate whitespace-nowrap overflow-hidden",children:t.title}),e.jsx("td",{className:"p-3 border-b text-gray-600 max-w-[200px] truncate whitespace-nowrap overflow-hidden",children:t.description}),e.jsx("td",{className:"p-3 border-b",children:(c=t.users)==null?void 0:c.map(h=>e.jsxs("b",{className:"",children:[h.name,","]}))}),e.jsx("td",{className:"p-3 border-b",children:e.jsx(b,{href:route("task.show",t.id),className:"text-sm text-blue-500 hover:underline",children:"عرض"})})]},t.id)},x)}),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-4 text-center text-gray-500",children:"لا توجد مهام حالياً."})})]})]}),e.jsx(w,{links:r.links})]})]})]})}export{T as default};
