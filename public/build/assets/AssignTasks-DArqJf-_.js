import{u,j as s}from"./app-BMMUUtt3.js";import{A as b}from"./AuthenticatedLayout-DX-eAp2J.js";import"./ApplicationLogo-DACMkUDR.js";import"./ResponsiveNavLink-F9ICIPml.js";import"./transition-S_Iy5K2R.js";function v({project:n,tasks:l,users:m}){var d;console.log(l,"tasks");const{data:a,setData:o,post:c}=u({employee_tasks:l.reduce((e,t)=>(e[t.id]=t.users.map(i=>i.id),e),{})}),r=(e,t)=>{const i=a.employee_tasks[e]||[],x=i.includes(t)?i.filter(h=>h!==t):[...i,t];o("employee_tasks",{...a.employee_tasks,[e]:x})},p=e=>{e.preventDefault(),c(route("projects.saveTasks",n.id))};return s.jsx(b,{children:s.jsxs("div",{className:"container p-6",children:[s.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["اسناد المهام للموظفين للمشروع: ",n.name]}),s.jsxs("form",{onSubmit:p,className:" bg-white form-control p-6",children:[s.jsxs("div",{children:[s.jsx("b",{children:"Project Tasks"}),s.jsx("div",{className:"mt-3",children:(d=n.tasks)==null?void 0:d.map(e=>s.jsxs("div",{className:"mb-8 mt-2",children:[s.jsx("li",{className:"border p-2 text-2xl",children:e.title}),s.jsx("div",{children:m.map(t=>{var i;return s.jsx("div",{className:"mt-2",children:s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",name:`task_${e.id}[]`,checked:(i=a.employee_tasks[e.id])==null?void 0:i.includes(t.id),onChange:()=>r(e.id,t.id),className:"mr-2 ml-2"}),t.name]})},t.id)})})]},e.id))})]}),s.jsx("button",{type:"submit",className:"btn btn-green btn-fixed-bottom",children:" حفظ"})]})]})})}export{v as default};
