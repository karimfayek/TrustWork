import{r as p,u as m,j as e,L as u}from"./app-DFR0j93C.js";import{U as j}from"./UserLayout-CO6cXn6p.js";import"./ApplicationLogo-A3SkbZSN.js";import"./ResponsiveNavLink-tUVBmEgr.js";import"./transition-DRuHvXgM.js";function w({workOrders:r}){const[d,n]=p.useState(!1),{data:a,setData:l,post:i,processing:h,reset:o,errors:t}=m({client_name:"",client_phone:"",client_address:"",description:""});function x(s){s.preventDefault(),i(route("work-orders.store"),{onSuccess:()=>{o(),n(!1)}})}return e.jsx(j,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"طلبات أوامر الشغل"}),e.jsx("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"➕ طلب جديد"})]}),e.jsx("div",{className:"bg-white rounded shadow overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-right",children:"العميل"}),e.jsx("th",{className:"p-2 text-right",children:"الهاتف"}),e.jsx("th",{className:"p-2 text-right",children:"العنوان"}),e.jsx("th",{className:"p-2 text-right",children:"التفاصيل"}),e.jsx("th",{className:"p-2 text-right",children:"التاريخ"}),e.jsx("th",{className:"p-2 text-right",children:"الموظف"}),e.jsx("th",{className:"p-2 text-right",children:"الإجراءات"})]})}),e.jsxs("tbody",{children:[r.map(s=>{var c;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:s.client_name}),e.jsx("td",{className:"p-2",children:s.client_phone}),e.jsx("td",{className:"p-2",children:s.client_address}),e.jsx("td",{className:"p-2",children:s.description}),e.jsx("td",{className:"p-2",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-2",children:(c=s.user)==null?void 0:c.name}),e.jsx("td",{className:"p-2",children:e.jsx(u,{href:route("work-orders.destroy",s.id),method:"delete",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"مسح"})})]},s.id)}),!r.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-4 text-center text-gray-500",children:"لا توجد طلبات"})})]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded shadow p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"طلب أمر شغل"}),e.jsxs("form",{onSubmit:x,className:"space-y-3",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"اسم العميل",value:a.client_name,onChange:s=>l("client_name",s.target.value)}),t.client_name&&e.jsx("p",{className:"text-red-500",children:t.client_name}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"رقم الهاتف",value:a.client_phone,onChange:s=>l("client_phone",s.target.value)}),t.client_phone&&e.jsx("p",{className:"text-red-500",children:t.client_phone}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"العنوان",value:a.client_address,onChange:s=>l("client_address",s.target.value)}),t.client_address&&e.jsx("p",{className:"text-red-500",children:t.client_address}),e.jsx("textarea",{className:"w-full border rounded p-2",rows:"3",placeholder:"زيارة / معاينة / تفاصيل",value:a.description,onChange:s=>l("description",s.target.value)}),t.description&&e.jsx("p",{className:"text-red-500",children:t.description}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border rounded",children:"إلغاء"}),e.jsx("button",{disabled:h,className:"bg-green-600 text-white px-4 py-2 rounded",children:"✅ تأكيد"})]})]})]})})]})})}export{w as default};
